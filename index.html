<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pediatrics Quiz</title>
  <style>
    :root{--bg:#f7fafc;--card:#ffffff;--accent:#2563eb;--ok:#16a34a;--bad:#dc2626}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial; background:var(--bg); padding:24px;}
    .container{max-width:760px;margin:0 auto;background:var(--card);border-radius:12px;padding:22px;box-shadow:0 6px 24px rgba(16,24,40,0.08);}    
    h1{margin:0 0 8px 0;font-size:20px;color:#0f172a}
    p.lead{margin:0 0 18px 0;color:#475569}
    .qnum{font-weight:700;margin-bottom:6px}
    .question{font-size:18px;margin:8px 0 14px 0}
    .options{display:flex;flex-direction:column;gap:8px}
    label.option{display:flex;gap:10px;align-items:center;padding:10px;border-radius:8px;border:1px solid #e6eef8;cursor:pointer}
    input[type=radio]{width:18px;height:18px}
    .controls{display:flex;justify-content:space-between;gap:10px;margin-top:18px}
    button{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:8px;cursor:pointer}
    button.secondary{background:#e6eef8;color:#0f172a}
    .progress{height:10px;background:#eef2ff;border-radius:999px;margin-top:12px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#7c3aed);width:0%}
    .result{margin-top:18px;padding:12px;border-radius:8px}
    .result.ok{background:rgba(16,185,129,0.12);color:var(--ok);}
    .result.bad{background:rgba(239,68,68,0.08);color:var(--bad)}
    .small{font-size:13px;color:#334155}
    .fb-correct{color:var(--ok);font-weight:700;margin-top:8px}
    .fb-wrong{color:var(--bad);font-weight:700;margin-top:8px}
    footer{margin-top:18px;font-size:13px;color:#64748b}
  </style>
</head>
<body>
  <div class="container">
    <h1>Pediatrics Quiz (Immediate Feedback)</h1>
    <p class="lead">Select an answer — the quiz will instantly tell you whether it is correct before you can continue.</p>

    <div id="quiz"></div>

    <div class="controls">
      <button id="prevBtn" class="secondary">Previous</button>
      <div style="flex:1"></div>
      <button id="nextBtn">Next</button>
    </div>

    <div class="progress" aria-hidden><i id="progbar"></i></div>

    <div id="final" style="display:none"></div>

    <footer>References: page numbers provided in the questions.</footer>
  </div>

<script>
const questions = [
  {"id": 1, "text": "A medical emergency is defined as:", "choices": ["A situation where the patient needs routine check-up", "A condition requiring immediate medical care to prevent loss of life, limb, or organ", "Any visit to the hospital", "Only when the patient is unconscious"], "correct": 1, "ref": "Page 3" },
  {"id": 2, "text": "The Emergency Department is described as:", "choices": ["A routine outpatient unit", "A critical and sensitive unit managing emergency cases", "A place for scheduled surgeries", "A rehabilitation center"], "correct": 1, "ref": "Page 3" },
  {"id": 3, "text": "Emergency nursing practice includes:", "choices": ["Only urgent and critical care", "Only nonurgent problems", "Broadened to include what the patient or family considers an emergency", "Only pediatric care"], "correct": 2, "ref": "Page 4" },
  {"id": 4, "text": "Emergency nurses have special expertise in:", "choices": ["Performing surgery", "Assessing and identifying health care problems in crisis situations", "Only administrative duties", "Long-term care planning"], "correct": 1, "ref": "Page 4" },
  {"id": 5, "text": "The first priority in emergency measures for all patients is:", "choices": ["Documentation", "Safety", "Medication administration", "Family counseling"], "correct": 1, "ref": "Page 6" },
  {"id": 6, "text": "Triage sorts patients based on:", "choices": ["Age", "Insurance type", "Severity of health problems and immediacy of treatment needed", "First-come, first-served"], "correct": 2, "ref": "Page 7" },
  {"id": 7, "text": "In ED triage, the most critically ill patients:", "choices": ["Wait the longest", "Receive the most resources regardless of potential outcome", "Are treated last", "Are sent home"], "correct": 1, "ref": "Page 7" },
  {"id": 8, "text": "An 'emergent' triage category means:", "choices": ["Minor illness that can wait", "Potentially life-threatening injuries or illnesses requiring immediate treatment", "Routine check-up", "Chronic condition follow-up"], "correct": 1, "ref": "Page 8" },
  {"id": 9, "text": "The primary survey follows the method:", "choices": ["LMNOP", "ABCDE", "PRICE", "SOAP"], "correct": 1, "ref": "Page 9" },
  {"id": 10, "text": "In the primary survey, 'A' stands for:", "choices": ["Alert", "Airway", "Assessment", "Analgesia"], "correct": 1, "ref": "Page 9" },
  {"id": 11, "text": "In trauma patients, after establishing airway, priority is given to:", "choices": ["Foot examination", "Protecting cervical spine and assessing chest injuries", "Taking history", "Documentation"], "correct": 1, "ref": "Page 10" },
  {"id": 12, "text": "The Glasgow Coma Scale assesses:", "choices": ["Kidney function", "Neurologic function", "Liver enzymes", "Blood glucose"], "correct": 1, "ref": "Page 10" },
  {"id": 13, "text": "A GCS score of 13-15 indicates:", "choices": ["Severe brain injury", "Moderate brain injury", "Minor brain injury", "Brain death"], "correct": 2, "ref": "Page 11" },
  {"id": 14, "text": "In the AVPU scale, 'V' stands for:", "choices": ["Ventilation", "Verbal response", "Vascular access", "Vision"], "correct": 1, "ref": "Page 12" },
  {"id": 15, "text": "A patient who responds only to painful stimuli is classified in AVPU as:", "choices": ["Alert", "Voice", "Pain", "Unresponsive"], "correct": 2, "ref": "Page 12" },
  {"id": 16, "text": "The secondary survey includes:", "choices": ["Head-to-toe assessment", "Only primary survey", "Only family interview", "Discharge planning"], "correct": 0, "ref": "Page 14" },
  {"id": 17, "text": "Priority emergency measures include management of:", "choices": ["Airway obstruction", "Hair loss", "Chronic back pain", "Routine vaccination"], "correct": 0, "ref": "Page 15" },
  {"id": 18, "text": "A method to establish an airway is:", "choices": ["Endotracheal intubation", "Blood transfusion", "X-ray", "Bed rest"], "correct": 0, "ref": "Page 16" },
  {"id": 19, "text": "Control of external bleeding includes use of:", "choices": ["Pressure points", "Only antibiotics", "Only painkillers", "Heat therapy"], "correct": 0, "ref": "Page 20" },
  {"id": 20, "text": "The femoral pressure point is used for bleeding from the:", "choices": ["Head", "Arm", "Leg", "Chest"], "correct": 2, "ref": "Page 20" },
  {"id": 21, "text": "Basic wound management first step is:", "choices": ["Start stitches", "Follow infection control principles (hand washing, gloves)", "Apply ointment immediately", "Leave wound open"], "correct": 1, "ref": "Page 22" },
  {"id": 22, "text": "Trauma is defined as:", "choices": ["A planned surgical incision", "An unintentional or intentional wound or injury", "A chronic disease", "A psychological condition only"], "correct": 1, "ref": "Page 24" },
  {"id": 23, "text": "For a patient with multiple trauma, the highest priority is given to injuries interfering with:", "choices": ["Cosmetic appearance", "Vital physiologic function", "Old scars", "Hairline fractures"], "correct": 1, "ref": "Page 25" },
  {"id": 24, "text": "In abdominal trauma, assessment includes checking for referred pain which may indicate injury to:", "choices": ["Spleen, liver, or intraperitoneal structures", "Only the skin", "Only the muscles", "The brain"], "correct": 0, "ref": "Page 26" },
  {"id": 25, "text": "If viscera are protruding from an abdominal wound, you should:", "choices": ["Push them back in", "Cover with sterile, moist saline dressing", "Leave them exposed", "Apply dry heat"], "correct": 1, "ref": "Page 27" },
  {"id": 26, "text": "A complication of crush injuries is:", "choices": ["Hypovolemic shock", "Improved appetite", "Increased energy", "Better sleep"], "correct": 0, "ref": "Page 28" },
  {"id": 27, "text": "Heat stroke is:", "choices": ["A failure of heat-regulating mechanisms", "Always caused by infection", "Only seen in athletes", "Treated with warming blankets"], "correct": 0, "ref": "Page 29" },
  {"id": 28, "text": "In heat stroke management, the goal is to reduce temperature to:", "choices": ["41°C", "39°C", "37°C", "35°C"], "correct": 1, "ref": "Page 30" },
  {"id": 29, "text": "A cooling method for heat stroke is:", "choices": ["Applying hot packs", "Ice to neck, groin, chest, and axillae", "Drinking hot tea", "Using a sauna"], "correct": 1, "ref": "Page 30" },
  {"id": 30, "text": "Frostbite manifestations include skin that is:", "choices": ["Hot and sweaty", "Hard, cold, and insensitive to touch", "Bright red and itchy", "Peeling only"], "correct": 1, "ref": "Page 32" },
  {"id": 31, "text": "For frostbite, rewarming should be done in a circulating bath at:", "choices": ["20–25°C", "30–34°C", "37–40°C", "45–50°C"], "correct": 2, "ref": "Page 32" },
  {"id": 32, "text": "Hypothermia is defined as an internal core temperature of:", "choices": ["Less than 35°C", "More than 38°C", "Exactly 37°C", "More than 40°C"], "correct": 0, "ref": "Page 33" },
  {"id": 33, "text": "In hypothermia management, active core rewarming may include:", "choices": ["Warm blankets only", "Cardiopulmonary bypass, warm fluid administration", "Ice packs", "Cool showers"], "correct": 1, "ref": "Page 34" },
  {"id": 34, "text": "A poison is a substance that injures the body by its chemical action in:", "choices": ["Large amounts only", "Relatively small amounts", "Only when injected", "Only when smelled"], "correct": 1, "ref": "Page 35" },
  {"id": 35, "text": "A goal of poisoning management is to:", "choices": ["Increase absorption", "Remove or inactivate the poison before absorption", "Ignore the substance", "Give more of the poison"], "correct": 1, "ref": "Page 35" },
  {"id": 36, "text": "For ingested poison, a measure to decrease absorption is:", "choices": ["Inducing vomiting always", "Activated charcoal", "Giving more poison", "Applying heat"], "correct": 1, "ref": "Page 37" },
  {"id": 37, "text": "For corrosive poison (acids/alkalies), you should:", "choices": ["Always induce vomiting", "Never induce vomiting", "Give large amounts of water to drink", "Apply directly to skin"], "correct": 1, "ref": "Page 37" },
  {"id": 38, "text": "Carbon monoxide binds to hemoglobin to form:", "choices": ["Oxyhemoglobin", "Carboxyhemoglobin", "Methemoglobin", "Deoxyhemoglobin"], "correct": 1, "ref": "Page 39" },
  {"id": 39, "text": "Treatment for carbon monoxide poisoning includes:", "choices": ["Administering 100% oxygen", "Giving carbonated drinks", "Keeping in closed room", "Applying cold compresses"], "correct": 0, "ref": "Page 39" },
  {"id": 40, "text": "For chemical burns, immediate action is:", "choices": ["Apply ointment", "Immediately flush skin with running water", "Cover with bandage", "Brush off dry if lye or white phosphorus", "ref": "Page 40" },
  {"id": 41, "text": "Food poisoning may result from ingestion of:", "choices": ["Contaminated food or drink", "Only expired medicine", "Clean water only", "Fresh vegetables only"], "correct": 0, "ref": "Page 41" },
  {"id": 42, "text": "In acute alcohol intoxication, priority is to:", "choices": ["Maintain airway", "Give more alcohol", "Ignore the patient", "Administer stimulants"], "correct": 0, "ref": "Page 43" },
  {"id": 43, "text": "In psychiatric emergencies, a goal is to:", "choices": ["Maintain safety of all persons", "Leave patient alone", "Ignore behavior", "Challenge the patient aggressively"], "correct": 0, "ref": "Page 44" },
  {"id": 44, "text": "Crisis intervention for violence/abuse aims to:", "choices": ["Blame the patient", "Provide support and reduce emotional trauma", "Ignore the situation", "Delay care"], "correct": 1, "ref": "Page 45" },
  {"id": 45, "text": "The ED triage nurse's role includes:", "choices": ["Collecting data and classifying illnesses/injuries", "Performing surgery", "Handling payroll", "Managing hospital finances"], "correct": 0, "ref": "Page 7" },
  {"id": 46, "text": "The 'D' in ABCDE stands for:", "choices": ["Drugs", "Disability", "Documentation", "Diet"], "correct": 1, "ref": "Page 9" },
  {"id": 47, "text": "The 'E' in ABCDE stands for:", "choices": ["Exposure", "Exercise", "Emotion", "Eating"], "correct": 0, "ref": "Page 9" },
  {"id": 48, "text": "In primary survey, breathing assessment ensures:", "choices": ["Adequate ventilation", "Only airway patency", "Only circulation", "Only disability"], "correct": 0, "ref": "Page 10" },
  {"id": 49, "text": "In primary survey, circulation is evaluated by:", "choices": ["Controlling hemorrhage and treating shock", "Only checking pulse", "Only taking blood pressure", "Only assessing skin color"], "correct": 0, "ref": "Page 10" },
  {"id": 50, "text": "The maximum GCS score is:", "choices": ["10", "12", "15", "20"], "correct": 2, "ref": "Page 11" },
  {"id": 51, "text": "A patient with no eye opening gets a GCS eye score of:", "choices": ["1", "2", "3", "4"], "correct": 0, "ref": "Page 11" },
  {"id": 52, "text": "A patient who obeys commands gets a GCS motor score of:", "choices": ["6", "5", "4", "3"], "correct": 0, "ref": "Page 11" },
  {"id": 53, "text": "A confused but conversing patient gets a GCS verbal score of:", "choices": ["5", "4", "3", "2"], "correct": 1, "ref": "Page 11" },
  {"id": 54, "text": "In AVPU, an alert patient is:", "choices": ["Fully awake and responsive", "Only responsive to pain", "Unresponsive", "Only responsive to voice"], "correct": 0, "ref": "Page 13" },
  {"id": 55, "text": "Secondary survey may include:", "choices": ["Diagnostic and lab testing", "Only primary survey", "Ignoring wounds", "No monitoring"], "correct": 0, "ref": "Page 14" },
  {"id": 56, "text": "For airway obstruction, an oropharyngeal airway is inserted:", "choices": ["Through the nose", "Through the mouth", "Through the ear", "Through the abdomen"], "correct": 1, "ref": "Page 16" },
  {"id": 57, "text": "King tube is used for:", "choices": ["Airway management", "Blood transfusion", "Feeding", "X-ray"], "correct": 0, "ref": "Page 18" },
  {"id": 58, "text": "Hemorrhage control may require:", "choices": ["Fluid replacement", "Ignoring bleeding", "Applying heat", "Elevating head only"], "correct": 0, "ref": "Page 19" },
  {"id": 59, "text": "The brachial pressure point is used for bleeding from the:", "choices": ["Upper arm", "Head", "Chest", "Foot"], "correct": 0, "ref": "Page 20" },
  {"id": 60, "text": "Types of wounds include:", "choices": ["Abrasion, avulsion, incision", "Only surgical wounds", "Only internal wounds", "Only burns"], "correct": 0, "ref": "Page 21" },
  {"id": 61, "text": "Wound cleansing should be done with:", "choices": ["Mild soapy water", "Strong acid", "Alcohol only", "No cleansing needed"], "correct": 0, "ref": "Page 22" },
  {"id": 62, "text": "Trauma is a leading cause of death in the US:", "choices": ["First", "Second", "Third", "Fourth"], "correct": 3, "ref": "Page 24" },
  {"id": 63, "text": "For multiple trauma, assume:", "choices": ["Cervical spine injury", "No injury", "Only limb injury", "Only head injury"], "correct": 0, "ref": "Page 25" },
  {"id": 64, "text": "In abdominal injury assessment, FAST stands for:", "choices": ["Focused Assessment with Sonography for Trauma", "Fast Alcohol Screening Test", "Fever Assessment Screening Tool", "Food Allergy Sensitivity Test"], "correct": 0, "ref": "Page 26" },
  {"id": 65, "text": "For abdominal trauma, oral fluids should be:", "choices": ["Given freely", "Withheld", "Only given if patient asks", "Mixed with medication"], "correct": 1, "ref": "Page 27" },
  {"id": 66, "text": "Crush injury complications include:", "choices": ["Renal dysfunction", "Improved kidney function", "Increased urine output", "No systemic effects"], "correct": 0, "ref": "Page 28" },
  {"id": 67, "text": "Exertional heat stroke occurs:", "choices": ["In healthy individuals during exertion in extreme heat", "Only in cold weather", "Only in sleeping patients", "Only in children"], "correct": 0, "ref": "Page 29" },
  {"id": 68, "text": "Heat stroke manifestations include:", "choices": ["Hot dry skin, anhydrosis", "Cold clammy skin", "Bradycardia", "Hypotension only"], "correct": 0, "ref": "Page 29" },
  {"id": 69, "text": "In heat stroke, monitor for:", "choices": ["Temperature recurrence in 3-4 hours", "Only blood pressure", "Only heart rate", "Only respiratory rate"], "correct": 0, "ref": "Page 30" },
  {"id": 70, "text": "Frostbite injury extent:", "choices": ["Is always known immediately", "Is not always initially known", "Is only superficial", "Never involves tissue damage"], "correct": 1, "ref": "Page 32" },
  {"id": 71, "text": "For frostbite, do not:", "choices": ["Massage or handle the area", "Rewarm", "Give analgesics", "Seek medical care"], "correct": 0, "ref": "Page 32" },
  {"id": 72, "text": "Hypothermia risk factors include:", "choices": ["Older adults, infants", "Only young adults", "Only athletes", "Only well-nourished individuals"], "correct": 0, "ref": "Page 33" },
  {"id": 73, "text": "In hypothermia, cold blood returning from extremities can cause:", "choices": ["Cardiac dysrhythmias", "Improved cardiac output", "No effect", "Only hypertension"], "correct": 0, "ref": "Page 34" },
  {"id": 74, "text": "Poisoning treatment may include:", "choices": ["Administering specific antidotes", "Ignoring the poison", "Giving more of the poison", "Only observation"], "correct": 0, "ref": "Page 35" },
  {"id": 75, "text": "In poisoning assessment, determine:", "choices": ["What, when, and how much substance was ingested", "Only patient's name", "Only address", "Only past medical history"], "correct": 0, "ref": "Page 36" },
  {"id": 76, "text": "Activated charcoal is used to:", "choices": ["Absorb some poisons", "Induce vomiting always", "Cause diarrhea only", "Replace fluids"], "correct": 0, "ref": "Page 37" },
  {"id": 77, "text": "Carbon monoxide poisoning causes hypoxemia because:", "choices": ["Carboxyhemoglobin cannot transport oxygen", "It increases oxygen carrying capacity", "It improves hemoglobin function", "It has no effect on oxygen"], "correct": 0, "ref": "Page 39" },
  {"id": 78, "text": "For chemical burns from lye, you should:", "choices": ["Brush off dry before flushing", "Flush immediately only", "Apply acid", "Cover with oil"], "correct": 0, "ref": "Page 40" },
  {"id": 79, "text": "Food poisoning like botulism may cause:", "choices": ["Respiratory paralysis", "Improved breathing", "Increased appetite", "No serious effects"], "correct": 0, "ref": "Page 41" },
  {"id": 80, "text": "In alcohol intoxication, rule out:", "choices": ["Other potential causes of behavior", "Only alcohol", "Only drugs", "Only trauma"], "correct": 0, "ref": "Page 43" },
  {"id": 81, "text": "For violent patients, use a:", "choices": ["Nonjudgmental, calm manner", "Aggressive approach", "Ignoring technique", "Confrontational style"], "correct": 0, "ref": "Page 43" },
  {"id": 82, "text": "In psychiatric emergencies, determine if patient is at risk for:", "choices": ["Injuring self or others", "Only self-improvement", "Only socializing", "Only sleeping"], "correct": 0, "ref": "Page 44" },
  {"id": 83, "text": "Crisis intervention begins:", "choices": ["As soon as patient enters facility", "After discharge", "Next day", "Only after full assessment"], "correct": 0, "ref": "Page 45" },
  {"id": 84, "text": "In abuse cases, collect:", "choices": ["Forensic evidence", "Only personal belongings", "Only money", "No evidence"], "correct": 0, "ref": "Page 45" },
  {"id": 85, "text": "SANE stands for:", "choices": ["Sexual Assault Nurse Examiner", "Systemic Acute Nursing Evaluation", "Sudden Arrhythmia Nursing Exam", "Standardized Assessment of Neurologic Emergency"], "correct": 0, "ref": "Page 45" },
  {"id": 86, "text": "The trigge area may initiate:", "choices": ["Protocols", "Surgeries", "Long-term care plans", "Home discharges"], "correct": 0, "ref": "Page 7" },
  {"id": 87, "text": "Emergency nurses work:", "choices": ["Interdependently with physicians", "Completely independently", "Only with patients", "Only with families"], "correct": 0, "ref": "Page 4" },
  {"id": 88, "text": "Family-focused interventions include:", "choices": ["Allowing family to stay if possible", "Always excluding family", "Ignoring family anxiety", "Only medicating family"], "correct": 0, "ref": "Page 6" },
  {"id": 89, "text": "A delayed primary closure is for:", "choices": ["Wounds closed later after cleaning", "Immediate suture", "Never closing", "Only abrasions"], "correct": 0, "ref": "Page 21" },
  {"id": 90, "text": "The subclavian pressure point is for bleeding from:", "choices": ["Shoulder and upper arm", "Foot", "Head", "Abdomen"], "correct": 0, "ref": "Page 20" },
  {"id": 91, "text": "For ingested poisons, gastric lavage is:", "choices": ["A method to remove toxin", "A method to increase absorption", "Not used", "Only for corrosive agents"], "correct": 0, "ref": "Page 37" },
  {"id": 92, "text": "Carbon monoxide poisoning skin color is:", "choices": ["Not a reliable sign", "Always cherry red", "Always pale", "Always cyanotic"], "correct": 0, "ref": "Page 39" },
  {"id": 93, "text": "Food poisoning management includes:", "choices": ["Treating fluid and electrolyte imbalances", "Ignoring vomiting", "Giving solid food immediately", "No fluid replacement"], "correct": 0, "ref": "Page 41" },
  {"id": 94, "text": "Alcohol poisoning may result in:", "choices": ["Death", "Improved health", "No effect", "Only mild drowsiness"], "correct": 0, "ref": "Page 43" },
  {"id": 95, "text": "For underactive or depressed patients, management includes:", "choices": ["Maintaining self-esteem while providing care", "Ignoring them", "Challenging them", "Isolating them"], "correct": 0, "ref": "Page 44" },
  {"id": 96, "text": "Patient reaction to rape may include:", "choices": ["Rape trauma syndrome", "No psychological effect", "Immediate forgetting", "Only physical injury"], "correct": 0, "ref": "Page 45" },
  {"id": 97, "text": "The emergency service is an interface between:", "choices": ["Hospital and community", "Only hospital departments", "Only community centers", "Only outpatient clinics"], "correct": 0, "ref": "Page 3" },
  {"id": 98, "text": "In trigge, the nurse ensures that:", "choices": ["Most needy patients do not needlessly wait", "All patients wait equally", "Non-urgent cases go first", "No classification is needed"], "correct": 0, "ref": "Page 7" },
  {"id": 99, "text": "The temporal pressure point is for bleeding from the:", "choices": ["Scalp", "Chest", "Abdomen", "Leg"], "correct": 0, "ref": "Page 20" },
  {"id": 100, "text": "A secondary survey includes:", "choices": ["Wound care and splinting", "Only primary survey repetition", "No interventions", "Only medication administration"], "correct": 0, "ref": "Page 14" }
];

let current = 0;
const answers = Array(questions.length).fill(null);
let answered = Array(questions.length).fill(false); // To lock after answering

function render(){
  const q = questions[current];
  const container = document.getElementById('quiz');

  container.innerHTML = `
    <div class="qnum">Question ${current+1} of ${questions.length} <span class="small">(Ref: ${q.ref})</span></div>
    <div class="question">${q.text}</div>
    <div class="options">
      ${q.choices.map((c,i)=>`<label class="option"><input type="radio" name="choice" value="${i}" ${answers[current]===i? 'checked' : ''} ${answered[current] ? 'disabled' : ''}> <span>${String.fromCharCode(65+i)}) ${c}</span></label>`).join('')}
    </div>
    <div id="feedback" style="margin-top:12px"></div>
  `;

  document.getElementById('prevBtn').disabled = current===0;
  document.getElementById('nextBtn').disabled = !answered[current];
  document.getElementById('nextBtn').textContent = current===questions.length-1? 'Finish Quiz' : 'Next';

  updateProgress();
  attachOptionListeners();

  if(answered[current]) showImmediateFeedback();
}

function attachOptionListeners(){
  const opts = document.querySelectorAll('input[name=choice]');
  opts.forEach(o=>o.addEventListener('change', (e)=>{
    answers[current] = parseInt(e.target.value);
    answered[current] = true;
    showImmediateFeedback();
    disableOptions();
    document.getElementById('nextBtn').disabled = false;
  }));
}

function disableOptions(){
  document.querySelectorAll('input[name=choice]').forEach(o=>o.disabled = true);
}

function showImmediateFeedback(){
  const fb = document.getElementById('feedback');
  const q = questions[current];
  const isCorrect = answers[current] === q.correct;

  fb.innerHTML = isCorrect ?
    `<div class='fb-correct'>Correct ✔</div>` :
    `<div class='fb-wrong'>Incorrect ✘ — Correct answer is (${String.fromCharCode(65+q.correct)}) ${q.choices[q.correct]}</div>`;
}

function updateProgress(){
  const pct = Math.round(((current)/questions.length)*100);
  document.getElementById('progbar').style.width = pct+'%';
}

function prev(){ if(current>0){ current--; render(); } }

function next(){
  if(!answered[current]){
    alert('Please select an answer before continuing.');
    return;
  }
  if(current < questions.length-1){ current++; render(); return; }
  showResult();
}

function showResult(){
  let correctCount = 0;
  questions.forEach((q,i)=>{
    if(answers[i] === q.correct) correctCount++;
  });
  const percent = Math.round((correctCount/questions.length)*100);
  const final = document.getElementById('final');
  final.style.display = '';
  final.innerHTML = `
    <div class="result ${percent>=60? 'ok':'bad'}">
      <div style="font-weight:700;font-size:18px">Your Score: ${correctCount}/${questions.length} — ${percent}%</div>
      <div class="small" style="margin-top:6px">${percent>=60? 'Good job!' : 'Review the material and try again.'}</div>
    </div>
    <div style="margin-top:12px">
      <button id="restartBtn">Restart Quiz</button>
    </div>
  `;

  document.getElementById('prevBtn').disabled = true;
  document.getElementById('nextBtn').disabled = true;

  document.getElementById('restartBtn').addEventListener('click', ()=>{
    for(let i=0;i<answers.length;i++){ answers[i]=null; answered[i]=false; }
    current = 0;
    document.getElementById('final').style.display='none';
    document.getElementById('prevBtn').disabled=false;
    document.getElementById('nextBtn').disabled=false;
    render();
  });
}

// Attach buttons
document.getElementById('prevBtn').addEventListener('click', prev);
document.getElementById('nextBtn').addEventListener('click', next);

// initialize
render();
</script>
</body>
</html>
